## 5. Channels

### <a id="top-channels"></a>5.1. Top Channels

```shell
curl "analytics.getsocial.io/api/channels/top?from=2018-01-01&to=2018-01-31&sort_by=shares&limit=2" \
  -H "Authorization: abcdef0123abcdef0123"
```

> The above command returns a JSON structured like this:

```json
[
  {
    "identifier": "Facebook",
    "shares": 40,
    "referrals": 150,
    "viral_score": 100.0,
    "recirculation_percentage": 0.05,
    "recirculation_depth": 1.3
  },
  {
    "identifier": "Twitter",
    "shares": 9,
    "referrals": 12,
    "viral_score": 12.0,
    "recirculation_percentage": 0.12,
    "recirculation_depth": 1.5
  }
]
```

This endpoint retrieves the overall top channels, with total shares and referrals, viral score and recirculation between the two dates specified (inclusive).


#### HTTP Request

`GET http://analytics.getsocial.io/api/channels/top`

#### Query Parameters

Parameter | Type     | Default      | Description
--------- | -------- | ------------ | --------
from      | `string` | -            | Date from which to start counting data
to        | `string` | -            | Date to which to stop counting data
sort_by   | `string` | shares       | Metric used to sort channels. Accepted values are `shares`, `referrals`, `viral_score`, `recirculation_percentage` and `recirculation_depth`
limit     | `number` | 10           | Max number of results to retrieve


#### Returns

An array of <b>channels</b> where each one is represented by:

Field                    | Type      | Description
-----------              | --------- | --------
identifier               | `string`  | The channel identifier
shares                   | `integer` | Number of shares performed on the website via channel
referrals                | `integer` | Number of visits generated by shared posts of the website via channel
viral_score              | `float`   | Virality score of channel
recirculation_percentage | `float`   | Average recirculation from referrals
recirculation_depth      | `float`   | Average depth of sessions that started from a referral


### 5.2. Top Channels in last 24-hours

```shell
curl "analytics.getsocial.io/api/channels/top?limit=3&sort_by=referrals" \
  -H "Authorization: abcdef0123abcdef0123"
```

> The above command returns a JSON structured like this:

```json
[
  {
    "identifier": "Facebook",
    "shares": 40,
    "referrals": 150,
    "viral_score": 100.0,
    "recirculation_percentage": 0.15,
    "recirculation_depth": 1.12
  },
  {
    "identifier": "Twitter",
    "shares": 10,
    "referrals": 80,
    "viral_score": 60.0,
    "recirculation_percentage": 0.23,
    "recirculation_depth": 3.5
  },
  {
    "identifier": "DarkSocial",
    "shares": 10,
    "referrals": 30,
    "viral_score": 20.0,
    "recirculation_percentage": 1.34,
    "recirculation_depth": 4.12
  }
]
```

This endpoint retrieves the top channels in the last 24 hours sorted by a specific metric. It can be used to retrieve the most shared and most referred channels.

#### HTTP Request

`GET http://analytics.getsocial.io/api/channels/top`

#### Query Parameters

Parameter | Type     | Default | Description
--------- | -------- | --------- | --------
limit     | `number` | 10        | Number of channels to be retrieved
sort_by   | `string` | shares    | Metric used to sort channels. Accepted values are `shares`, `referrals`, `viral_score`, `recirculation_percentage` and `recirculation_depth`


#### Returns

An array of <b>channels</b> where each one is represented by:

Field                    | Type      | Description
-----------              | --------- | --------
identifier               | `string`  | The channel identifier
shares                   | `integer` | Number of shares performed on the website via channel
referrals                | `integer` | Number of visits generated by shared posts of the website via channel
viral_score              | `float`   | Virality score of channel
recirculation_percentage | `float`   | Average recirculation from referrals
recirculation_depth      | `float`   | Average depth of sessions that started from a referral


### 5.3. Top Channel Users


```shell
curl "analytics.getsocial.io/api/channels/facebook/users?from=2018-01-01&to=2018-01-31&sort_by=shares&limit=2" \
  -H "Authorization: abcdef0123abcdef0123"
```

> The above command returns a JSON structured like this:

```json
[
  {
    "identifier": "friend@gmail.com",
    "visits": 113,
    "shares": 21,
    "referrals": 64
  },
  {
    "identifier": "enemy@gmail.com",
    "visits": 81,
    "shares": 18,
    "referrals": 72
  }
]
```

This endpoint retrieves the top users for the channel, with total visits, shares and referrals between the two dates specified (inclusive).


#### HTTP Request

`GET http://analytics.getsocial.io/api/channels/<channel_id>/users`

#### Query Parameters

Parameter  | Type     | Default      | Description
---------- | -------- | ------------ | --------
channel_id | `string` | -            | Channel identifier
from       | `string` | -            | Date from which to start counting data
to         | `string` | -            | Date to which to stop counting data
sort_by    | `string` | `shares`     | Criteria by which to sort users, can be `visits`, `shares` or `referrals`
limit      | `number` | 10           | Max number of results to retrieve


#### Returns

An array of <b>users</b> where each one is represented by:

Field        | Type      | Description
------------ | --------- | --------
identifier   | `string`  | The user identifier
shares       | `integer` | Number of shares performed on the website by the user via a given channel
referrals    | `integer` | Number of visits generated by shared posts of the website by the user via a given channel


### 5.4. Top Channel Locations


```shell
curl "analytics.getsocial.io/api/stories/abcd1234/locations?from=2018-01-01&to=2018-01-31&sort_by=shares" \
  -H "Authorization: abcdef0123abcdef0123"
```

> The above command returns a JSON structured like this:

```json
[
  {
    "country_code": "PT",
    "region": "Lisboa",
    "shares": 3500,
    "referrals": 1500
  },
  {
    "country_code": "PT",
    "region": "Porto",
    "shares": 3000,
    "referrals": 2345
  },
  {
    "country_code": "ES",
    "region": "Madrid",
    "shares": 2670,
    "referrals": 1500
  }
]
```

This endpoint retrieves the top locations for the story, with total shares and referrals between the two dates specified (inclusive).


#### HTTP Request

`GET http://analytics.getsocial.io/api/channels/<channel_id>/locations`

#### Query Parameters

Parameter  | Type     | Default      | Description
---------- | -------- | ------------ | --------
channel_id | `string` | -            | Channel identifier
from       | `string` | -            | Date from which to start counting data
to         | `string` | -            | Date to which to stop counting data


#### Fields in array response

Field        | Type      | Description
------------ | --------- | --------
country_code | `string`  | The country code on ISO 3166-1 alpha-2 format
region       | `string`  | The region name
shares       | `integer` | Number of shares performed on that region
referrals    | `integer` | Number of visits on that region generated by shared posts


<!--
### 5.5. Top Channel Stories


```shell
curl "analytics.getsocial.io/api/channels/facebook/stories?from=2018-01-01&to=2018-01-31&sort_by=shares&limit=2" \
  -H "Authorization: abcdef0123abcdef0123"
```

> The above command returns a JSON structured like this:

```json
[
  {
    "identifier": "abcd1234",
    "visits": 113,
    "shares": 21,
    "referrals": 64,
    "title": "The Same Old Story",
    "path": "/"
  },
  {
    "identifier": "abcd1235",
    "visits": 81,
    "shares": 18,
    "referrals": 72,
    "title": "Oblomov",
    "path": "/home"
  }
]
```

This endpoint retrieves the top stories for the channel, with total visits, shares and referrals between the two dates specified (inclusive).


#### HTTP Request

`GET http://analytics.getsocial.io/api/channels/<channel_id>/stories`

#### Query Parameters

Parameter  | Type     | Default      | Description
---------- | -------- | ------------ | --------
channel_id | `string` | -            | Channel identifier
from       | `string` | -            | Date from which to start counting data
to         | `string` | -            | Date to which to stop counting data
sort_by    | `string` | `shares`     | Criteria by which to sort stories, can be `visits`, `shares` or `referrals`
limit      | `number` | 10           | Max number of results to retrieve


#### Returns

List of channel top stories with total visits, shares and referrals.
-->
